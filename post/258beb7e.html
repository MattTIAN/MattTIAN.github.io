<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MySQL Frequently Used Command(II) | Matthew Tian</title><meta name="keywords" content="MySQL"><meta name="author" content="Matthew Tian"><meta name="copyright" content="Matthew Tian"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL Frequently Used Command (II)CRUD (Create, Retrieve, Update, Delete)1. Basic Retrieve Usage123select * from &lt;table_name&gt;;# assign certain columnsselect &lt;col1&gt;, &lt;col2&gt;,... from &amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL Frequently Used Command(II)">
<meta property="og:url" content="https://matttian.github.io/post/258beb7e.html">
<meta property="og:site_name" content="Matthew Tian">
<meta property="og:description" content="MySQL Frequently Used Command (II)CRUD (Create, Retrieve, Update, Delete)1. Basic Retrieve Usage123select * from &lt;table_name&gt;;# assign certain columnsselect &lt;col1&gt;, &lt;col2&gt;,... from &amp;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png">
<meta property="article:published_time" content="2022-08-09T10:35:19.000Z">
<meta property="article:modified_time" content="2022-08-15T05:52:37.621Z">
<meta property="article:author" content="Matthew Tian">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://matttian.github.io/post/258beb7e"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL Frequently Used Command(II)',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-15 13:52:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Matthew Tian</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL Frequently Used Command(II)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-08-09T10:35:19.000Z" title="Created 2022-08-09 18:35:19">2022-08-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-08-15T05:52:37.621Z" title="Updated 2022-08-15 13:52:37">2022-08-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL-Tutorials/">MySQL Tutorials</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">2.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>17min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL Frequently Used Command(II)"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MySQL-Frequently-Used-Command-II"><a href="#MySQL-Frequently-Used-Command-II" class="headerlink" title="MySQL Frequently Used Command (II)"></a>MySQL Frequently Used Command (II)</h1><h2 id="CRUD-Create-Retrieve-Update-Delete"><a href="#CRUD-Create-Retrieve-Update-Delete" class="headerlink" title="CRUD (Create, Retrieve, Update, Delete)"></a>CRUD (Create, Retrieve, Update, Delete)</h2><h3 id="1-Basic-Retrieve-Usage"><a href="#1-Basic-Retrieve-Usage" class="headerlink" title="1. Basic Retrieve Usage"></a>1. Basic Retrieve Usage</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span>;</span><br><span class="line"># assign certain columns</span><br><span class="line"><span class="keyword">select</span> <span class="operator">&lt;</span>col1<span class="operator">&gt;</span>, <span class="operator">&lt;</span>col2<span class="operator">&gt;</span>,... <span class="keyword">from</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-Create-a-new-data-item"><a href="#2-Create-a-new-data-item" class="headerlink" title="2. Create a new data item"></a>2. Create a new data item</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">insert</span> <span class="keyword">all</span> columns <span class="keyword">as</span> a data item</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> <span class="keyword">values</span>(...);</span><br><span class="line"># <span class="keyword">insert</span> several columns <span class="keyword">as</span> a data item</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span>(col1, col2, col3, ...) <span class="keyword">values</span>(value1, value2, value3, ...);</span><br><span class="line"># <span class="keyword">insert</span> more than <span class="keyword">one</span> data items (<span class="keyword">all</span> columns) <span class="keyword">into</span> assigned <span class="keyword">table</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> <span class="keyword">values</span>(...), (...), ...;</span><br><span class="line"># <span class="keyword">insert</span> more than <span class="keyword">one</span> data items (assigned columns) <span class="keyword">into</span> assigned <span class="keyword">table</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span>(col1, col2, col3, ...) <span class="keyword">values</span>(value1, value2, value3, ...), (valueI, valueII, valueIII), ...;</span><br></pre></td></tr></table></figure>

<h3 id="3-Update"><a href="#3-Update" class="headerlink" title="3. Update"></a>3. Update</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">update</span> the <span class="keyword">value</span> <span class="keyword">of</span> data item</span><br><span class="line"><span class="keyword">update</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> <span class="keyword">set</span> col1<span class="operator">=</span>value1, col2<span class="operator">=</span>value2, col3<span class="operator">=</span>value3, ... <span class="keyword">where</span> [<span class="keyword">condition</span>]</span><br></pre></td></tr></table></figure>

<h3 id="4-Delete"><a href="#4-Delete" class="headerlink" title="4. Delete"></a>4. Delete</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">delete</span> data item </span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> <span class="keyword">where</span> [<span class="keyword">condition</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Conditional-retrieval"><a href="#Conditional-retrieval" class="headerlink" title="Conditional retrieval"></a>Conditional retrieval</h2><p>keyword where supports many kinds  of operators, such as:</p>
<ul>
<li><p>comparable operators</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1. =</span></span><br><span class="line"><span class="string">2. &lt;</span></span><br><span class="line"><span class="string">3. &gt;</span></span><br><span class="line"><span class="string">4. &lt;=</span></span><br><span class="line"><span class="string">5. &gt;=</span></span><br><span class="line"><span class="string">6. != or &lt;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>logical operators </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1. and</span></span><br><span class="line"><span class="string">2. or </span></span><br><span class="line"><span class="string">3. not</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>fuzzy queries</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1. like</span></span><br><span class="line"><span class="string">2. % stands for multiple arbitrary characters</span></span><br><span class="line"><span class="string">3. _ stanfs for one arbitraty character</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>scope queries</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1. in stands for a inconsecutive scope</span></span><br><span class="line"><span class="string">2. between ... and ... stands for a consecutive scope</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>	</span><br></pre></td></tr></table></figure>
</li>
<li><p>null judgment</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># judge <span class="keyword">null</span></span><br><span class="line"><span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line"># judge <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>priority<br>The order of priority from high to low is : () &gt; not &gt; comparable operators &gt; logical operators.</p>
<p><code>and</code> has higher priority than <code>or </code></p>
</li>
</ul>
<h2 id="Sort"><a href="#Sort" class="headerlink" title="Sort"></a>Sort</h2><p>For checking out data easily, and make data ordered.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="operator">&lt;</span>col1<span class="operator">&gt;</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> [, col2 <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>, ...	];</span><br><span class="line"># <span class="keyword">Search</span> <span class="keyword">for</span> undeleted student information, <span class="keyword">in</span> ascending <span class="keyword">order</span> <span class="keyword">by</span> name</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> is_delete<span class="operator">=</span><span class="number">0</span> <span class="keyword">order</span> <span class="keyword">by</span> name;</span><br><span class="line"># <span class="keyword">Show</span> <span class="keyword">all</span> students, sort <span class="keyword">by</span> age <span class="keyword">first</span> <span class="keyword">from</span> oldest <span class="operator">-</span><span class="operator">&gt;</span> youngest, <span class="keyword">and</span> <span class="keyword">when</span> age <span class="keyword">is</span> the same sort <span class="keyword">by</span> height <span class="keyword">from</span> tallest <span class="operator">-</span><span class="operator">&gt;</span> shortest</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>, height <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Aggregation-functions"><a href="#Aggregation-functions" class="headerlink" title="Aggregation functions"></a>Aggregation functions</h2><p>In order to obtain statistics quickly, the following five aggregation functions are often used</p>
<ol>
<li><p>count (*) </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">Check</span> the total number <span class="keyword">of</span> students</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> students;</span><br></pre></td></tr></table></figure>
</li>
<li><p>max(col_name)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">Check</span> the maximum number <span class="keyword">of</span> girls</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(id) <span class="keyword">from</span> students <span class="keyword">where</span> gender <span class="operator">=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>min(col_name)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Query the minimum number <span class="keyword">of</span> students that have <span class="keyword">not</span> been deleted</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(id) <span class="keyword">from</span> students <span class="keyword">where</span> is_delete <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>sum(col_name)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">Check</span> the total age <span class="keyword">of</span> the boys</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(age) <span class="keyword">from</span> students <span class="keyword">where</span> gender <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>avg(col_name)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Query the average number <span class="keyword">of</span> undeleted girls</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(id) <span class="keyword">from</span> students <span class="keyword">where</span> gender <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> is_delete <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h2><h3 id="1-group-by"><a href="#1-group-by" class="headerlink" title="1. group by"></a>1. group by</h3><ol>
<li>Group by: The query results are grouped according to one or more fields. The query results with the same field value belong to a group</li>
<li>Group BY can be used to group a single field or multiple fields</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+------+--------+--------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name      <span class="operator">|</span> age  <span class="operator">|</span> height <span class="operator">|</span> gender <span class="operator">|</span> cls_id <span class="operator">|</span> is_delete <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+------+--------+--------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">|</span>小明 <span class="operator">|</span> <span class="number">18</span><span class="operator">|</span><span class="number">180.00</span><span class="operator">|</span>女<span class="operator">|</span> <span class="number">1</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span><span class="operator">|</span>小月月  <span class="operator">|</span> <span class="number">18</span><span class="operator">|</span><span class="number">180.00</span><span class="operator">|</span>女<span class="operator">|</span> <span class="number">2</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span><span class="operator">|</span>彭于晏  <span class="operator">|</span> <span class="number">29</span><span class="operator">|</span><span class="number">185.00</span><span class="operator">|</span>男<span class="operator">|</span> <span class="number">1</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span><span class="operator">|</span>刘德华  <span class="operator">|</span> <span class="number">59</span><span class="operator">|</span><span class="number">175.00</span><span class="operator">|</span>男<span class="operator">|</span> <span class="number">2</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span><span class="operator">|</span>⻩蓉    <span class="operator">|</span> <span class="number">38</span><span class="operator">|</span><span class="number">160.00</span><span class="operator">|</span>女<span class="operator">|</span> <span class="number">1</span>｜</span><br><span class="line"><span class="operator">|</span> <span class="number">6</span><span class="operator">|</span>凤姐		<span class="operator">|</span> <span class="number">28</span><span class="operator">|</span><span class="number">150.00</span><span class="operator">|</span>保密<span class="operator">|</span> <span class="number">2</span>｜</span><br><span class="line"><span class="operator">|</span><span class="number">7</span><span class="operator">|</span>王祖贤	 <span class="operator">|</span> <span class="number">18</span>｜<span class="number">172.00</span><span class="operator">|</span>女<span class="operator">|</span> <span class="number">1</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="number">8</span><span class="operator">|</span>周杰伦	 <span class="operator">|</span> <span class="number">36</span><span class="operator">|</span><span class="keyword">NULL</span><span class="operator">|</span>男<span class="operator">|</span> <span class="number">1</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">9</span><span class="operator">|</span>程坤		<span class="operator">|</span> <span class="number">27</span><span class="operator">|</span><span class="number">181.00</span><span class="operator">|</span>男<span class="operator">|</span> <span class="number">2</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="number">10</span><span class="operator">|</span>刘亦菲	 <span class="operator">|</span> <span class="number">25</span><span class="operator">|</span><span class="number">166.00</span><span class="operator">|</span>女<span class="operator">|</span> <span class="number">2</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="number">11</span><span class="operator">|</span>金星 		<span class="operator">|</span> <span class="number">33</span><span class="operator">|</span><span class="number">162.00</span>｜中性｜<span class="number">3</span>｜</span><br><span class="line"><span class="operator">|</span><span class="number">12</span><span class="operator">|</span>静香 		<span class="operator">|</span>	<span class="number">12</span><span class="operator">|</span><span class="number">180.00</span>｜女<span class="operator">|</span> <span class="number">4</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="number">13</span><span class="operator">|</span>周杰 		<span class="operator">|</span> <span class="number">34</span><span class="operator">|</span><span class="number">176.00</span><span class="operator">|</span>女<span class="operator">|</span> <span class="number">5</span><span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="number">14</span><span class="operator">|</span>郭靖 		<span class="operator">|</span> <span class="number">12</span><span class="operator">|</span><span class="number">170.00</span><span class="operator">|</span>男<span class="operator">|</span> <span class="number">4</span><span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+------+--------+--------+--------+-----------+</span></span><br><span class="line"><span class="keyword">select</span> gender <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>男<span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>女<span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>中性 <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>保密 <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------</span></span><br><span class="line"># <span class="keyword">Group</span> <span class="keyword">by</span> has little practical meaning <span class="keyword">when</span> used alone</span><br></pre></td></tr></table></figure>

<h3 id="2-group-by-group-concat"><a href="#2-group-by-group-concat" class="headerlink" title="2. group by + group_concat()"></a>2. group by + group_concat()</h3><ol>
<li><p>Group_concat (field name) can be used as an output field.</p>
</li>
<li><p>After grouping, use group_concat() to place the set of values of a field in each group based on the grouping result</p>
</li>
</ol>
<p>us</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> gender <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>男<span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>女<span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>中性 <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>保密 <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="keyword">select</span> gender,group_concat(name) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender; </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------------------------------------------------------+ </span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span> group_concat(name) <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------------------------------------------------------+ </span></span><br><span class="line"><span class="operator">|</span> 男 <span class="operator">|</span> 彭于晏,刘德华,周杰伦,程坤,郭靖 <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span> 女 <span class="operator">|</span> 小明,小月月,⻩蓉,王祖贤,刘亦菲,静香,周杰 <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>中性 <span class="operator">|</span>金星 <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>保密 <span class="operator">|</span>凤姐 <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------------------------------------------------------+</span></span><br><span class="line"><span class="keyword">select</span> gender,group_concat(id) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------------+</span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span> group_concat(id) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------------+</span></span><br><span class="line"><span class="operator">|</span> 男 <span class="operator">|</span> <span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">14</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span> 女 <span class="operator">|</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">13</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>中性 <span class="operator">|</span><span class="number">11</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>保密 <span class="operator">|</span><span class="number">6</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------------+</span></span><br></pre></td></tr></table></figure>

<h3 id="3-group-by-aggregation-functions"><a href="#3-group-by-aggregation-functions" class="headerlink" title="3. group by + aggregation functions"></a>3. group by + aggregation functions</h3><ol>
<li>Inspired by group_concat(), we can count the set of values of a field for each group. We can also operate on the set of values using the set function</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> gender,group_concat(age) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span> group_concat(age)    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> 男 <span class="operator">|</span> <span class="number">29</span>,<span class="number">59</span>,<span class="number">36</span>,<span class="number">27</span>,<span class="number">12</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span> 女 <span class="operator">|</span> <span class="number">18</span>,<span class="number">18</span>,<span class="number">38</span>,<span class="number">18</span>,<span class="number">25</span>,<span class="number">12</span>,<span class="number">34</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>中性 <span class="operator">|</span><span class="number">33</span> <span class="operator">|</span> <span class="operator">|</span>保密 <span class="operator">|</span><span class="number">28</span> <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------------+</span></span><br><span class="line"><span class="comment">-- 分别统计性别为男/女的人年龄平均值</span></span><br><span class="line"><span class="keyword">select</span> gender,<span class="built_in">avg</span>(age) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender; </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span> <span class="built_in">avg</span>(age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span> 男</span><br><span class="line"><span class="operator">|</span> 女</span><br><span class="line"><span class="operator">|</span> 中性</span><br><span class="line"><span class="operator">|</span> 保密 </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="comment">-- 分别统计性别为男/女的人的个数</span></span><br><span class="line"><span class="keyword">select</span> gender,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender; </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span>男			<span class="operator">|</span><span class="number">5</span>					<span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>女			<span class="operator">|</span><span class="number">7</span>					<span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>中性		  <span class="operator">|</span> <span class="number">1</span>				 <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>保密			<span class="operator">|</span> <span class="number">1</span>				 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br></pre></td></tr></table></figure>

<h3 id="4-group-by-having"><a href="#4-group-by-having" class="headerlink" title="4. group by + having"></a>4. group by + having</h3><ol>
<li><p>Condition expression: used to specify conditions after a group query to output the query results</p>
</li>
<li><p>Having acts the same as where, but having can only be used with group by</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> gender,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> gender <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+ </span></span><br><span class="line"><span class="operator">|</span> gender <span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span>男			 <span class="operator">|</span><span class="number">5</span>					<span class="operator">|</span> </span><br><span class="line"><span class="operator">|</span>女			 <span class="operator">|</span><span class="number">7</span>					<span class="operator">|</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br></pre></td></tr></table></figure>

<h2 id="Get-partial-rows"><a href="#Get-partial-rows" class="headerlink" title="Get partial rows"></a>Get partial rows</h2><p>When the volume of data is too large, looking at the data on a page can be a hassle</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> limit <span class="operator">&lt;</span><span class="keyword">start</span><span class="operator">&gt;</span>,<span class="operator">&lt;</span>count<span class="operator">&gt;</span></span><br><span class="line"># Query the <span class="keyword">first</span> <span class="number">3</span> lines <span class="keyword">of</span> male information</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> gender <span class="operator">=</span> <span class="number">1</span> limit <span class="number">0</span>, <span class="number">3</span>;</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; Known: each page displays m data, the current display of the n page to find the total number of pages: this section of logic will be implemented in Python laterQuery the total number of items P1 by dividing P1 by m to get P2 if divided evenly P2 is the total number of pages if not P2 +1 is the total number of pages Find the data on page n</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> is_delete<span class="operator">=</span><span class="number">0</span> limit (n<span class="number">-1</span>)<span class="operator">*</span>m,m</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h2 id="Join-queries"><a href="#Join-queries" class="headerlink" title="Join queries"></a>Join queries</h2><p>If the query result comes from multiple tables, you need to join the tables into a large data set and select the appropriate column to return the query result. Mysql supports three types of join query: </p>
<ol>
<li>The result of an inner-join query is the data that is matched by the two tables</li>
<li>Right join query The query result is the data matched by the two tables. The unique data of the right table is filled with null for the data that does not exist in the left table</li>
<li>The result of the query is the data that matches the two tables, the data that is unique to the left table, and the data that does not exist in the right table are filled with null</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>table1<span class="operator">&gt;</span> <span class="keyword">inner</span><span class="operator">|</span><span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span> <span class="keyword">join</span> <span class="operator">&lt;</span>table2<span class="operator">&gt;</span> <span class="keyword">on</span> <span class="operator">&lt;</span>table1.col<span class="operator">&gt;</span> <span class="operator">=</span> <span class="operator">&lt;</span>table2.col<span class="operator">&gt;</span>;</span><br><span class="line"># Use the <span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">to</span> query the class <span class="keyword">table</span> <span class="keyword">with</span> the student <span class="keyword">table</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">inner</span> <span class="keyword">join</span> classes <span class="keyword">on</span> students.cls_id<span class="operator">=</span>classes.id;</span><br><span class="line"># Use the <span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">to</span> query the class <span class="keyword">table</span> <span class="keyword">with</span> the student <span class="keyword">table</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">left</span> <span class="keyword">join</span> classes <span class="keyword">on</span> students.cls_id<span class="operator">=</span>classes.id;</span><br><span class="line"># Use the <span class="keyword">right</span> <span class="keyword">join</span> <span class="keyword">to</span> query the class <span class="keyword">table</span> <span class="keyword">and</span> the student <span class="keyword">table</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">right</span> <span class="keyword">join</span> classes <span class="keyword">on</span> students.cls_id<span class="operator">=</span>classes.id;</span><br><span class="line"># <span class="keyword">Search</span> <span class="keyword">for</span> student name <span class="keyword">and</span> class name</span><br><span class="line"><span class="keyword">select</span> s.name, c.name <span class="keyword">from</span> students <span class="keyword">as</span> s <span class="keyword">inner</span> <span class="keyword">join</span> classes <span class="keyword">as</span> c <span class="keyword">on</span> s.cls_id<span class="operator">=</span>c.id;</span><br></pre></td></tr></table></figure>

<h2 id="Self-correlation"><a href="#Self-correlation" class="headerlink" title="Self-correlation"></a>Self-correlation</h2><p>Two tables waste storage space, thus, there is a method to combine two tables into one table.</p>
<h2 id="Subquery"><a href="#Subquery" class="headerlink" title="Subquery"></a>Subquery</h2><ol>
<li>Subquery concepts</li>
</ol>
<p>When a SELECT statement is embedded with another SELECT statement, the embedded SELECT statement is called a subquery statement</p>
<ol start="2">
<li><p>Main Query Indicates the primary query object, the first SELECT statement</p>
</li>
<li><p>Relationship between main query and sub-query</p>
</li>
</ol>
<p>Subqueries are embedded in the main query and subqueries are secondary to the main query, either as conditions or as data sources and a subquery is a statement that can stand on its own, a complete SELECT statement</p>
<ol start="4">
<li>Subquery categories</li>
</ol>
<p>Standard quantum query: The result returned by the subquery is a single data (one row and one column) column Subquery: the result returned by the subquery is a column (one column and many rows)</p>
<p>Row subquery: Returns one row of results (one row with multiple columns)</p>
<p>4.1 Standard quantum query</p>
<ol>
<li><p>Check the average age of students in the class</p>
</li>
<li><p>Search for students older than the average age</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">=</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(age) <span class="keyword">from</span> students);</span><br></pre></td></tr></table></figure>

<p>4.2 Column level subquery </p>
<p>Query also has the student in the class of all class names</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> classes <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="keyword">select</span> cls_id <span class="keyword">from</span> students);</span><br></pre></td></tr></table></figure>

<p>4.3 Row-level subquery</p>
<p>Needs: Find the oldest and tallest student in the class</p>
<p>Row element: Multiple fields are combined into a row element that is used in row-level subqueries</p>
<p>4.4 Use specific keywords in subqueries</p>
<p><code>in</code> the scope of</p>
<p>Format: main query WHERE condition in (column subquery) </p>
<h2 id="Three-normal-form"><a href="#Three-normal-form" class="headerlink" title="Three normal form"></a>Three normal form</h2><h3 id="1NF"><a href="#1NF" class="headerlink" title="1NF"></a>1NF</h3><ul>
<li>After studying and summarizing the problems in use, some specifications for designing databases are proposed, which are called Normal forms.</li>
<li>At present, there are a total of 8 normal forms that can be traced. </li>
<li>Generally, the first normal form (1NF) needs to follow the three normal forms: the atomicity of columns is emphasized, that is, columns cannot be divided into other columns.</li>
</ul>
<h3 id="2NF"><a href="#2NF" class="headerlink" title="2NF"></a>2NF</h3><p>Second normal form (2NF): The first is 1NF, and contains two other parts. The first is that the table must have a primary key; The second is that columns that are not included in the primary key must depend entirely on the primary key, not just part of it.</p>
<h3 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h3><p>Third normal form (3NF): The first is 2NF. In addition, non-primary key columns must depend directly on the primary key, and there can be no passing dependencies. Non-primary key column A depends on non-primary key column B, and non-primary key column B depends on primary key condition.</p>
<h2 id="E-R-model"><a href="#E-R-model" class="headerlink" title="E-R model"></a>E-R model</h2><ul>
<li>Entity describes a class and its attributes.</li>
<li>Relationship describe corresponding rules between two entities, including 1 to 1, 1 to many, many to many.</li>
<li>A relationship is also A type of data that needs to be stored in A table through A field. </li>
<li>If entity A is 1-to-1 for entity B, create A field in Table A or table B to store the primary key value of another table</li>
</ul>
<h2 id="Logical-deletion"><a href="#Logical-deletion" class="headerlink" title="Logical deletion"></a>Logical deletion</h2><ul>
<li>For important data, physical deletion is not desired. </li>
<li>Once the data is deleted, the data cannot be retrieved.</li>
<li>Delete solution: Set the column of isDelete. </li>
<li>The type is bit, indicating logical deletion</li>
</ul>
<h2 id="Foreign-key-constraints"><a href="#Foreign-key-constraints" class="headerlink" title="Foreign key constraints"></a>Foreign key constraints</h2><ul>
<li>Foreign key constraints: Validation of data</li>
<li>Keyword: foreign key, only InnoDB database engine supports foreign key constraint</li>
<li>How do you update foreign key constraints on existing tables</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> goods <span class="keyword">add</span> <span class="keyword">foreign</span> key (cate_id) <span class="keyword">references</span> goods_cates(id);</span><br><span class="line"># while creating <span class="keyword">table</span>, <span class="keyword">set</span> <span class="keyword">foreign</span> key</span><br><span class="line"># note: <span class="keyword">foreign</span> keys<span class="string">&#x27; type should be same as associated tables.</span></span><br><span class="line"><span class="string">create table goods(</span></span><br><span class="line"><span class="string">    id int primary key auto_increment not null,</span></span><br><span class="line"><span class="string">    name varchar(40) default &#x27;&#x27;,</span></span><br><span class="line"><span class="string">    price decimal(5,2),</span></span><br><span class="line"><span class="string">    cate_id int unsigned,</span></span><br><span class="line"><span class="string">    brand_id int unsigned,</span></span><br><span class="line"><span class="string">    is_show bit default 1,</span></span><br><span class="line"><span class="string">    is_saleoff bit default 0,</span></span><br><span class="line"><span class="string">    foreign key(cate_id) references goods_cates(id),</span></span><br><span class="line"><span class="string">    foreign key(brand_id) references goods_brands(id)</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string"># how to cancel foreign key constraints</span></span><br><span class="line"><span class="string">show create table goods;</span></span><br><span class="line"><span class="string">alter table goods drop foreign key &lt;foreign_key_name&gt;;</span></span><br><span class="line"><span class="string"># In real process of development, foreign key constraints are less used due to reducing efficiency of updating tables.</span></span><br></pre></td></tr></table></figure>

<h2 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h2><ol>
<li>Primary Key Super Key Candidate Key Foreign key</li>
</ol>
<p>Primary key: A combination of data columns or attributes in a database table that uniquely and completely identify the stored data object. A data column can have only one primary key, and the value of the primary key cannot be missing, that is, it cannot be Null. Hyperkey: The set of attributes that uniquely identify a tuple in a relation is called the hyperkey of a relational schema. A single attribute can act as a superkey, and multiple attributes can be grouped together as a superkey. A hyperkey contains a candidate key and a primary key. Candidate key: is the minimum super key, that is, the super key with no redundant elements. Foreign key: The primary key of another table that exists in one table is called the foreign key of this table.</p>
<ol start="2">
<li>Four characteristics and meanings of database transactions</li>
</ol>
<p>Four essential elements of proper execution of database transaction transanction. Fixed color: ACID, Atomicity, Correspondence, Isolation, Durability. Atomicity: All the operations in the whole transaction are either complete or incomplete, and cannot be stalled somewhere in between. If an error occurs during the execution of a transaction, it will be rolled back to the state before the transaction started, as if the transaction had never been executed. Consistency: The integrity constraints of the database are not broken before and after the transaction. Isolation: The isolated state performs transactions as if they were the only operation performed by the system at a given time. If there are two transactions, running at the same time and performing the same function, the isolation of the transactions ensures that each transaction is recognized in the system as only that transaction is using the system. This property is sometimes called serialization, and in order to prevent confusion between transaction operations, it is necessary to serialize or serialize requests so that only one request is used for the same data at a time. Persistence: After a transaction is completed, changes made by the transaction to the database are persisted in the database and cannot be rolled back.</p>
<ol start="3">
<li><p>Database Optimization 3.1 SQL Statement Optimization</p>
<ol>
<li><p>Try to avoid using it in WHERE clauses! &#x3D; or &amp; lt; &gt; Operator, otherwise the engine will abandon the use of indexes and do a full table scan. </p>
</li>
<li><p>Try to avoid null value judgment in the WHERE clause, otherwise the engine will give up using the index and carry out the full table scan, such as: Select id from t where num is null You can set the default value 0 on num, make sure that the num column in the table has no null value, and then query as follows: Select id from t where num&#x3D;0 </p>
</li>
<li><p>Replacing in with exists is a good choice in many cases. </p>
</li>
<li><p>Replacing the HAVING clause with the WHERE clause because HAVING will only filter the result set after all records have been retrieved</p>
</li>
</ol>
</li>
</ol>
<p>3.2 Index Optimization</p>
<p>Recommendation: <a target="_blank" rel="noopener" href="http://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html">http://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html</a></p>
<p>3.3. Database structure optimization</p>
<ol>
<li>Paradigm optimization: such as eliminating redundancy (saving space). </li>
<li>Anti-normal pattern optimization: for example, add redundancy (reduce JOIN). </li>
<li>Partition table: Partition separates data physically, and data from different partitions can be stored in data files on different disks. So, when the query on the table, only need to brush stroke in the table partitioning, rather than a full table scan, significantly shorten the query time, the other in a different disk partition will also be on the table data scattered in different disk I&#x2F;O, an elaborate set of partition of disk I&#x2F;O data transmission can be evenly spread out. This method can be used for time tables with large amount of data. Table partition can be automatically created by month. </li>
<li>Split is actually divided into vertical split and horizontal split: Case: simple shopping system temporarily involves the following table: 1. Product table (data volume: 10W, stable) 2. Order table (data volume: 200W, increasing trend) 3. Take mysql as an example to describe horizontal and vertical splitting. The order of magnitude that mysql can tolerate is from millions of static data to tens of millions of static data. Vertical splitting: Solve the problem: The IO competition between tables does not solve the problem: the pressure of increasing data volume in a single table. Put the product table and user table on the same server and the order form on the same server Horizontally split: Solve the problem: The pressure of data volume growth in a single table does not solve the problem: table to table I&#x2F;O contention solution: The user table is split into male user table and female user table by gender the order table is split into completed order and unfinished order by completed and completed product table the unfinished order is placed on one server the completed order table box the male user table is placed on one server the female user table is placed on one server (women love shopping ha ha)</li>
</ol>
<p>3.4. Server hardware optimization</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://matttian.github.io">Matthew Tian</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://matttian.github.io/post/258beb7e.html">https://matttian.github.io/post/258beb7e.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/600b6efa.html"><img class="prev-cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">SQL 入门</div></div></a></div><div class="next-post pull-right"><a href="/post/cacc2ec6.html"><img class="next-cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">MySQL Frequently Used Command (I)</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/post/600b6efa.html" title="SQL 入门"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-31</div><div class="title">SQL 入门</div></div></a></div><div><a href="/post/cacc2ec6.html" title="MySQL Frequently Used Command (I)"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1024/book1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-07</div><div class="title">MySQL Frequently Used Command (I)</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Matthew Tian</div><div class="author-info__description">BETTER LATE THAN NEVER</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog<div class="xpand" style="height:200px;"></div></div></div><canvas class="illo" width="800" height="800" style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;"></canvas><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople1.js"></script><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/zdog.dist.js"></script><script id="rendered-js" src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople.js"></script><style>.card-widget.card-announcement {
margin: 0;
align-items: center;
justify-content: center;
text-align: center;
}
canvas {
display: block;
margin: 0 auto;
cursor: move;
}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-Frequently-Used-Command-II"><span class="toc-number">1.</span> <span class="toc-text">MySQL Frequently Used Command (II)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CRUD-Create-Retrieve-Update-Delete"><span class="toc-number">1.1.</span> <span class="toc-text">CRUD (Create, Retrieve, Update, Delete)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Basic-Retrieve-Usage"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Basic Retrieve Usage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Create-a-new-data-item"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. Create a new data item</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Update"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. Update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Delete"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. Delete</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conditional-retrieval"><span class="toc-number">1.2.</span> <span class="toc-text">Conditional retrieval</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sort"><span class="toc-number">1.3.</span> <span class="toc-text">Sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aggregation-functions"><span class="toc-number">1.4.</span> <span class="toc-text">Aggregation functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Group"><span class="toc-number">1.5.</span> <span class="toc-text">Group</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-group-by"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. group by</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-group-by-group-concat"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. group by + group_concat()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-group-by-aggregation-functions"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. group by + aggregation functions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-group-by-having"><span class="toc-number">1.5.4.</span> <span class="toc-text">4. group by + having</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Get-partial-rows"><span class="toc-number">1.6.</span> <span class="toc-text">Get partial rows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Join-queries"><span class="toc-number">1.7.</span> <span class="toc-text">Join queries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Self-correlation"><span class="toc-number">1.8.</span> <span class="toc-text">Self-correlation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subquery"><span class="toc-number">1.9.</span> <span class="toc-text">Subquery</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Three-normal-form"><span class="toc-number">1.10.</span> <span class="toc-text">Three normal form</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1NF"><span class="toc-number">1.10.1.</span> <span class="toc-text">1NF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2NF"><span class="toc-number">1.10.2.</span> <span class="toc-text">2NF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3NF"><span class="toc-number">1.10.3.</span> <span class="toc-text">3NF</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#E-R-model"><span class="toc-number">1.11.</span> <span class="toc-text">E-R model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Logical-deletion"><span class="toc-number">1.12.</span> <span class="toc-text">Logical deletion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Foreign-key-constraints"><span class="toc-number">1.13.</span> <span class="toc-text">Foreign key constraints</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Extension"><span class="toc-number">1.14.</span> <span class="toc-text">Extension</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/fa7a6a86.html" title="Mac m1Pro 配置 MySQL5.7.21环境">Mac m1Pro 配置 MySQL5.7.21环境</a><time datetime="2022-09-11T10:21:03.000Z" title="Created 2022-09-11 18:21:03">2022-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/1cee290f.html" title="编程能力入门">编程能力入门</a><time datetime="2022-08-31T04:55:49.000Z" title="Created 2022-08-31 12:55:49">2022-08-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/600b6efa.html" title="SQL 入门">SQL 入门</a><time datetime="2022-08-31T04:48:45.000Z" title="Created 2022-08-31 12:48:45">2022-08-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/258beb7e.html" title="MySQL Frequently Used Command(II)">MySQL Frequently Used Command(II)</a><time datetime="2022-08-09T10:35:19.000Z" title="Created 2022-08-09 18:35:19">2022-08-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/cacc2ec6.html" title="MySQL Frequently Used Command (I)">MySQL Frequently Used Command (I)</a><time datetime="2022-08-07T11:02:55.000Z" title="Created 2022-08-07 19:02:55">2022-08-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Matthew Tian</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script async src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>